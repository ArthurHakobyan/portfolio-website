---
import Image from "astro/components/Image.astro"
import img1 from '../assets/22.jpg'
import img2 from '../assets/5_as.jpg'
import img3 from '../assets/24.jpg'
import img4 from '../assets/er_1.jpg'
import img5 from '../assets/er_3.jpg'
import img6 from '../assets/ghy_7.jpg'

---

<div class="gallery">
      <figure data-grid="img-1">
        <Image
          src={img1}
          alt="good dog"
        />
      </figure>
      <figure data-grid="img-2">
        <Image
          src={img2}
          alt="good dog"
        />
      </figure>
      <figure data-grid="img-3">
        <Image
          src={img3}
          alt="good dog"
        />
      </figure>
      <figure data-grid="img-4">
        <Image
          src={img4}
          alt="good dog"
        />
      </figure>
      <figure data-grid="img-5">
        <Image
          src={img5}
          alt="good dog"
        />
      </figure>
      <figure data-grid="img-6">
        <Image
          src={img6}
          alt="good dog"
        />
      </figure>
    </div>

<style>
    .gallery {
  display: grid;
  grid-template-columns: repeat(9, 1fr);
  grid-template-rows: repeat(9, 1fr);
  grid-gap: 1rem;
  width: 60vw;
  max-height: 60vh;
  aspect-ratio: 1/1;
  margin: 5rem auto;
}

figure[data-grid="img-1"] {
  grid-area: 1 / 1 / 7 / 7;
}
figure[data-grid="img-2"] {
  grid-area: 1 / 7 / 4 / 10;
}
figure[data-grid="img-3"] {
  grid-area: 4 / 7 / 7 / 10;
}
figure[data-grid="img-4"] {
  grid-area: 7 / 7 / 10 / 10;
}
figure[data-grid="img-5"] {
  grid-area: 7 / 4 / 10 / 7;
}
figure[data-grid="img-6"] {
  grid-area: 7 / 1 / 10 / 4;
}

figure {
  position: relative;
  margin: 0;
  padding: 0;
}

img {
  position: absolute;
  height: 100%;
  width: 100%;
  object-fit: cover;
}

@media (max-width: 500px){
    .gallery {
        width: 90vw;
    }
}

</style>

<script>
    import gsap from "gsap";

import { Flip } from "gsap/Flip";

gsap.registerPlugin(Flip);

let dogs = gsap.utils.toArray("figure");
let bigDog = dogs[0];

dogs.forEach((dog) => {
  dog.addEventListener("click", (e) => changeGrid(dog));
});

function changeGrid(dog) {
  if (dog === bigDog) return;

  let state = Flip.getState(dogs);

  bigDog.dataset.grid = dog.dataset.grid;
  dog.dataset.grid = "img-1";
  bigDog = dog;

  Flip.from(state, {
    absolute: true,
    ease: "Power1.inOut",
    duration: 0.5
  });
}
</script>